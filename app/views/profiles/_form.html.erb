<%= form_for @profile, {}  do |form| %>
 
  <div class="form mb-4" style="margin-top:30px">
    
    <h3 class="text-center p-5 section-title font-weight-bold">Editar Perfil</h3>
    
    <!--NOMBRES Y APELLIDOS ################################-->
    <div class="row">
      <div class="col-12 col-sm-6">
        <div class="position-relative ml-4 mr-4 mr-sm-0">
          <%= form.text_field :name, :required => "required", class:"input-special", maxlength: "30" %><span class="barra bg-before-Standar"></span>
          <%= form.label :name, "Nombres", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:name].any? %>
            <p class="msj_error mt-2 bg-danger rounded w-100 width-error"><%= @profile.errors[:name].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>

      <div class="col-12 col-sm-6">
        <div class="position-relative mr-4 ml-4 ml-sm-0 mt-5 mt-sm-0">
          <%= form.text_field :last_name, :required => "required", class:"input-special", maxlength: "30" %><span class="barra bg-before-Standar"></span>
          <%= form.label :last_name, "Apellidos", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:last_name].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:last_name].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>
    </div>

    <!--GENERO Y FECHA DE NACIMIENTO-->
    <div class="row mt-5">
      <div class="col-12 col-sm-5 col-md-4">
        <div class="position-relative ml-4 mr-4 mr-sm-0">
          <div class="content-select">
            <%= form.select(:gender, options_for_select([['Genero', ""], ['Mujer', "Mujer"], ['Hombre', 'Hombre']], @profile.gender) ) %>
            <i></i>
          </div>
          <%if @profile.errors[:gender].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:gender].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>

      <div class="col-12 col-sm-4">
        <div class="position-relative mt-5 mt-sm-0 mx-4 mx-sm-0" id="div_cod_area">
          <input required="required" class="input-special" name="profile[date_of_birth]" value="<%=@profile.date_of_birth.nil? ? "" : @profile.date_of_birth.strftime("%d/%m/%Y")%>"  type="text" id="date" oninput="readonly(this)">
          <span class="barra bg-before-Standar"></span>
          <label class="label-special label-Standar">Fecha de nacimiento</label>
          <%if @profile.errors[:date_of_birth].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:date_of_birth].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>

      <div class="col-12 col-sm-3 col-md-4">
        <div class="position-relative mr-4 mt-5 mt-sm-0 ml-4 ml-sm-0">
          <%= form.text_field :age, :required => "required", class:"input-special", maxlength: "2", oninput: "input_value_integer(this)" %><span class="barra bg-before-Standar"></span>
          <%= form.label :age, "Edad", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:age].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:age].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>
    </div>

    <!--DOCUMENTO Y TELEFONO #################################-->
    <div class="row mt-5">
      <div class="col-12 col-sm-3 col-lg-2">
        <div class="position-relative ml-4 mr-4 mr-sm-0">
          <div class="content-select">
            <%= form.select(:type_document, options_for_select([['V', 'V'], ['E', "E"], ['P', "P"], ['J', "J"]], @profile.type_document) ) %>
            <i></i>
          </div>
          <%if @profile.errors[:type_document].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:type_document].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>

      <div class="col-12 col-sm-4 col-lg-5">
        <div class="position-relative mx-4 mx-sm-0 mt-5 mt-sm-0">
          <%= form.text_field :document, :required => "required", class:"input-special", maxlength: "9", oninput: "input_value_integer(this)"%><span class="barra bg-before-Standar"></span>
          <%= form.label :document, "N° Documento", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:document].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:document].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>

      <div class="col-12 col-sm-5 col-lg-5">
        <div class="position-relative mr-4 ml-4 ml-sm-0 mt-5 mt-sm-0">
          <%= form.text_field :phone, :required => "required", class:"input-special", maxlength: "11", oninput: "input_value_integer(this)"%><span class="barra bg-before-Standar"></span>
          <%= form.label :phone, "N° Telefono", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:phone].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:phone].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>
    </div>

    <!--UBICACION-->
    <div class="row mt-5">
      <div class="col-lg-4">
        <div class="position-relative ml-4 mr-4 mr-lg-0">
          <%= form.text_field :state, :required => "required", class:"input-special", maxlength: "20" %><span class="barra bg-before-Standar"></span>
          <%= form.label :state, "Estado", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:state].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:state].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="position-relative mx-4 mx-lg-0 mt-5 mt-lg-0">
          <%= form.text_field :city, :required => "required", class:"input-special", maxlength: "20" %><span class="barra bg-before-Standar"></span>
          <%= form.label :city, "Ciudad", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:city].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:city].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="position-relative mr-4 ml-4 ml-lg-0 mt-5 mt-lg-0">
          <%= form.text_field :zip_code, :required => "required", class:"input-special", maxlength: "4", oninput: "input_value_integer(this)" %><span class="barra bg-before-Standar"></span>
          <%= form.label :zip_code, "Codigo Postal", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:zip_code].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:zip_code].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>
    </div>

    <div class="row mt-5">
      <div class="col-12">
        <div class="position-relative mx-4">
          <%= form.text_field :address, :required => "required", class:"input-special", maxlength: "100" %><span class="barra bg-before-Standar"></span>
          <%= form.label :address, "Dirección", for: "", class: "label-special label-Standar" %>
          <%if @profile.errors[:address].any? %>
            <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:address].to_s[/\w([^"]*)/] %></p>
          <% end %>
        </div>
      </div>
    </div>

    <%if current_user.is_admin?%>
      <div class="row">
        <div class="col-12">
            <div class="position-relative mt-5 mx-4">
              <div class="content-select">
                <%= form.select(:status_usuario, options_for_select([['Activo', 'activo'], ['Bloqueado', "bloqueado"]], @profile.status_usuario) ) %>
                <i></i>
              </div>
              <%if @profile.errors[:status_usuario].any? %>
                <p class="msj_error mt-2 bg-danger rounded width-error"><%= @profile.errors[:status_usuario].to_s[/\w([^"]*)/] %></p>
              <% end %>
            </div>
          </div>
      </div>
    <%end%>
  
    <div class="actions mt-5">
      <button type="button" class="btn_standar btn-common btn-effect bg-special text-uppercase" id="btn_profile<%if current_user.is_admin?%>_admin<%end%>">Enviar</button>
      <%=form.submit "Enviar", class: "d-none", id: "btn_submit"%>
    </div>
  </div>
<% end %>


<script>
  <%if @profile.errors.any?%>
    estilizar_errores_validacion()
  <%end%>
</script>